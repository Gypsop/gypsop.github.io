# -*- coding: utf-8 -*-
"""
Created on Tue Apr 21 22:33:28 2020

@author: Gypsop
"""

import requests, json, time, re

def filter_emoji(desstr, restr=''):  
    #过滤emoji   
    try:  
        co = re.compile(u'[\U00010000-\U0010ffff]')  
    except:  
        co = re.compile(u'[\uD800-\uDBFF][\uDC00-\uDFFF]')  
    return co.sub(restr, desstr)  

#search_words = [["game centre", "遊戲機中心"], ["bathhouse", "洗浴"], ["fitness", "健身"], ["entertainment park", "遊樂場所"], ["public entertainment", "公眾娛樂場所"], ["party room", "派對"], ["nightclub", "夜總會"], ["karaoke", "卡拉OK"], ["mahjong", "麻將"], ["beauty parlour", "美容院"], ["massage", "按摩院"]]
search_words = [["public entertainment", "公眾娛樂場所"]]
for search_word in search_words:
    search_result = []
    for each_lang_search_word in search_word:
        request_url = "https://maps.googleapis.com/maps/api/place/textsearch/json?key=AIzaSyDHHFp4x6vKyYcyf_GKiJ8c2E9ygpsklds&query=" + each_lang_search_word + "&location=22.3,114.2&radius=25000&inputtype=textquery"
        request_result = json.loads(requests.get(request_url).text)
        search_result += request_result["results"]
        #search_result = [{'formatted_address': 'Hong Kong, Yau Ma Tei, Pitt St, 38號, Hip Kwan Commercial Building, 23樓4室', 'geometry': {'location': {'lat': 22.3135631, 'lng': 114.1697197}, 'viewport': {'northeast': {'lat': 22.31500537989272, 'lng': 114.1710488298927}, 'southwest': {'lat': 22.31230572010728, 'lng': 114.1683491701073}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/shopping-71.png', 'id': 'cae889336d07f04a31f01c6df2ee6193d07540bb', 'name': '香港雀晨.康佳麻雀機 自動麻將機 電動麻雀機 電動麻雀枱', 'opening_hours': {'open_now': True}, 'photos': [{'height': 720, 'html_attributions': ['<a href="https://maps.google.com/maps/contrib/100411783073721330892">香港康佳自動麻雀機電動麻雀臺</a>'], 'photo_reference': 'CmRaAAAATxMkZMVgN1F60pjH9qpp3-J8n8UYdWUpGtflu7Pnf7ZIG6SqptyYHqamGo4gGSlkGEnlKo0iwhoJ4Fi0FXKT6GrQbv8t008vxinYYPqyxIDHf8cGACeImkr4U20xWfcqEhBw_4OUsI5LG-4WNZ7FtCDFGhRNXbO34aGq2kZJGwpRHIfgO9UkjQ', 'width': 960}], 'place_id': 'ChIJr_Ex7Zn4AzQRm34Y06unn4Q', 'plus_code': {'compound_code': '8579+CV Yau Ma Tei', 'global_code': '7PJP8579+CV'}, 'rating': 4, 'reference': 'ChIJr_Ex7Zn4AzQRm34Y06unn4Q', 'types': ['home_goods_store', 'point_of_interest', 'store', 'establishment'], 'user_ratings_total': 15}, {'formatted_address': 'Hang Shing Building, 2 Kweilin St, Sham Shui Po, Hong Kong', 'geometry': {'location': {'lat': 22.3317521, 'lng': 114.1627335}, 'viewport': {'northeast': {'lat': 22.33315312989272, 'lng': 114.1640150298927}, 'southwest': {'lat': 22.33045347010728, 'lng': 114.1613153701073}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/generic_business-71.png', 'id': '7583a5faccf3e23dcf481427291ed63a54a58139', 'name': '松港會休閒麻將會所', 'opening_hours': {'open_now': True}, 'photos': [{'height': 4608, 'html_attributions': ['<a href="https://maps.google.com/maps/contrib/111371499899554356672">F. L.</a>'], 'photo_reference': 'CmRaAAAAMQ-CRU9j3B_yPgaIqa5rzYWGE8lsY9vxINo7C-TEI9E0ck1B7q-UyYrg5RzjCKOysvdPeq2yOperuCpW3ZZK1qL1uPWTx3r0J89Eunq7U9ExLipDBHFuL_ooxyvMi_LxEhCjeeYMj7a4a04VJGp3sLiKGhR_Crq16hfGANNMSnAJoTFrLNAaLA', 'width': 3456}], 'place_id': 'ChIJa4uOsLQABDQR3cTigAvomXE', 'plus_code': {'compound_code': '85J7+P3 Sham Shui Po', 'global_code': '7PJP85J7+P3'}, 'rating': 4.5, 'reference': 'ChIJa4uOsLQABDQR3cTigAvomXE', 'types': ['point_of_interest', 'establishment'], 'user_ratings_total': 2}, {'formatted_address': '46 Tai Lin Pai Rd, 號 Hong Kong', 'geometry': {'location': {'lat': 22.3640791, 'lng': 114.1335055}, 'viewport': {'northeast': {'lat': 22.36534717989272, 'lng': 114.1350981798927}, 'southwest': {'lat': 22.36264752010727, 'lng': 114.1323985201073}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/shopping-71.png', 'id': 'b0a8d2c7ae6baa69c7ef83d2c983f54156814b1d', 'name': '麻雀機，麻將機，電動麻雀機，維修麻雀枱中心', 'photos': [{'height': 1280, 'html_attributions': ['<a href="https://maps.google.com/maps/contrib/100411783073721330892">香港雀晨 歐派電動麻雀機公司電動麻雀枱</a>'], 'photo_reference': 'CmRaAAAAPqkWYWyth52fRdLoAJmr46MGH4_f243HuxpWbQZ3ukiLZfuRAkf3v-bhm9PCls2ye9XdK9dbJlFAL2hfCOF7BWNh10P8lbn790_LvP0DRDPksSIGrpdth5zPqZsLQY41EhDxfsvVP56vLgOLrhA-OqpiGhQb4XFlGhqQkssHLXQCSFffUGhJjg', 'width': 960}], 'place_id': 'ChIJr_Ex7Zn4AzQRhGgpd51OtgM', 'plus_code': {'compound_code': '947M+JC Hong Kong', 'global_code': '7PJP947M+JC'}, 'rating': 5, 'reference': 'ChIJr_Ex7Zn4AzQRhGgpd51OtgM', 'types': ['home_goods_store', 'point_of_interest', 'store', 'establishment'], 'user_ratings_total': 4}, {'formatted_address': '102 Fuk Wing St, Un Chau, Hong Kong', 'geometry': {'location': {'lat': 22.332378, 'lng': 114.162379}, 'viewport': {'northeast': {'lat': 22.33368807989272, 'lng': 114.1636932298927}, 'southwest': {'lat': 22.33098842010727, 'lng': 114.1609935701073}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/generic_business-71.png', 'id': '2441f07205cce92303ee1f5007ab0532c20339da', 'name': 'Golden Mahjong Entertainment Company', 'opening_hours': {}, 'photos': [{'height': 2736, 'html_attributions': ['<a href="https://maps.google.com/maps/contrib/111371499899554356672">Francis</a>'], 'photo_reference': 'CmRaAAAACWhvdpvyEOFkMBb1ou-5v-hLH6H_Om6Shnj-68QJ7dkQsoTp_F58glbQBwd95gFegDdqdrLawUAk8d-bKr2SICSbCVGZmRJzKlOG7S2hWxYR_HPqMypqlhgbJ279gAr-EhA4Qe_pTeYamBmGgCc7Iju_GhTZjkbY-S-7mwtukWD8Bz2gqhG3jg', 'width': 3648}], 'place_id': 'ChIJeaQ8rbQABDQR7JLgyTeQYpg', 'plus_code': {'compound_code': '85J6+XX Un Chau', 'global_code': '7PJP85J6+XX'}, 'rating': 3.2, 'reference': 'ChIJeaQ8rbQABDQR7JLgyTeQYpg', 'types': ['point_of_interest', 'establishment'], 'user_ratings_total': 5}, {'formatted_address': 'San Po Kong, Hong Kong', 'geometry': {'location': {'lat': 22.3360509, 'lng': 114.1955351}, 'viewport': {'northeast': {'lat': 22.33738052989272, 'lng': 114.1968700298927}, 'southwest': {'lat': 22.33468087010728, 'lng': 114.1941703701073}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/generic_business-71.png', 'id': 'f6dafc1432b97e1c5e5cddc732e551aff465eac6', 'name': '大財利蔴雀耍樂', 'opening_hours': {}, 'place_id': 'ChIJD_M0GtcGBDQRUM0ALeyK8Eg', 'plus_code': {'compound_code': '85PW+C6 San Po Kong', 'global_code': '7PJP85PW+C6'}, 'rating': 2.5, 'reference': 'ChIJD_M0GtcGBDQRUM0ALeyK8Eg', 'types': ['point_of_interest', 'establishment'], 'user_ratings_total': 4}, {'formatted_address': '27-29 Kam Wing St, San Po Kong, Hong Kong', 'geometry': {'location': {'lat': 22.335896, 'lng': 114.195844}, 'viewport': {'northeast': {'lat': 22.33720897989273, 'lng': 114.1971665798927}, 'southwest': {'lat': 22.33450932010728, 'lng': 114.1944669201073}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/generic_business-71.png', 'id': 'a96a402e4210cfa6b191a7cf28e72e1188797705', 'name': '鷄記娛樂公司', 'opening_hours': {}, 'place_id': 'ChIJU6LLGNcGBDQRwZCoW3y_INg', 'plus_code': {'compound_code': '85PW+98 San Po Kong', 'global_code': '7PJP85PW+98'}, 'rating': 3.1, 'reference': 'ChIJU6LLGNcGBDQRwZCoW3y_INg', 'types': ['point_of_interest', 'establishment'], 'user_ratings_total': 13}, {'formatted_address': 'Mia Cheong House, Portland St, Mong Kok, Hong Kong', 'geometry': {'location': {'lat': 22.315597, 'lng': 114.169371}, 'viewport': {'northeast': {'lat': 22.31695497989272, 'lng': 114.1707636798927}, 'southwest': {'lat': 22.31425532010728, 'lng': 114.1680640201073}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/generic_business-71.png', 'id': '415cac4329fc4e8526f93f87466b45c1de8375b0', 'name': '好旺角誠興麻雀砵蘭街分店', 'opening_hours': {}, 'photos': [{'height': 2988, 'html_attributions': ['<a href="https://maps.google.com/maps/contrib/115719734298342682426">Rick Cheng</a>'], 'photo_reference': 'CmRaAAAARRvCEHPrJlQ6a8A0eUFuAJEoBMMJXTKrDTT-0sXjtjvDGqCk89PJ8jz-daK62HtbTDL-48nbMuUu2NU3mk00JDkim_NiAE9kuDn5jbnPY2NdqmDLuuit-Sqx54i6Xm6JEhAuG73oDFvIJtKbRnhdsZHIGhSQEq-OjRHfXfoz3g1F53Ugp6m17w', 'width': 5312}], 'place_id': 'ChIJab7ZOMcABDQRoGSZ_61CW6U', 'plus_code': {'compound_code': '8589+6P Mong Kok', 'global_code': '7PJP8589+6P'}, 'rating': 4.3, 'reference': 'ChIJab7ZOMcABDQRoGSZ_61CW6U', 'types': ['point_of_interest', 'establishment'], 'user_ratings_total': 9}, {'formatted_address': '42-46 Tai Lin Pai Rd, Kwai Chung, Hong Kong', 'geometry': {'location': {'lat': 22.3640791, 'lng': 114.1335055}, 'viewport': {'northeast': {'lat': 22.36534717989272, 'lng': 114.1350981798927}, 'southwest': {'lat': 22.36264752010727, 'lng': 114.1323985201073}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/shopping-71.png', 'id': '81c2b93e0fa5580f990d5f5bef9953c08a9440f6', 'name': '爵仕自動麻雀機', 'photos': [{'height': 2448, 'html_attributions': ['<a href="https://maps.google.com/maps/contrib/117764336973757622123">Key Au</a>'], 'photo_reference': 'CmRaAAAABQBfKn63wlUoMGqy5bNXrnvfq57VaCYimSIT95TRhivGOrzIdnGb0EWoO3Ttll6RQqppUTPcm90NvAnVI0fbUQoxWt0AtaxDjBDxHeWJoxXS7xR22nBboFNYyNLzPweWEhB4EYiDyyCvr61JPTjjl88IGhTXe_xOCrfE8ZImqRZheHmdpW8PfQ', 'width': 3264}], 'place_id': 'ChIJU_Ax7Zn4AzQRfgyuB3Pu280', 'plus_code': {'compound_code': '947M+JC Kwai Chung', 'global_code': '7PJP947M+JC'}, 'rating': 5, 'reference': 'ChIJU_Ax7Zn4AzQRfgyuB3Pu280', 'types': ['point_of_interest', 'store', 'establishment'], 'user_ratings_total': 1}, {'formatted_address': 'Man Ming Ln, Yau Ma Tei, Hong Kong', 'geometry': {'location': {'lat': 22.3117596, 'lng': 114.1703577}, 'viewport': {'northeast': {'lat': 22.31310952989272, 'lng': 114.1717075298927}, 'southwest': {'lat': 22.31040987010728, 'lng': 114.1690078701073}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/generic_business-71.png', 'id': '7274195c6689c717bdec907b866e00992aa92ccc', 'name': '雞記麻雀', 'photos': [{'height': 3456, 'html_attributions': ['<a href="https://maps.google.com/maps/contrib/100845885424223925235">Stephen Mok</a>'], 'photo_reference': 'CmRaAAAA6SyY8WwD2_bQuBC3g4eHGNv4g9wq_gAbqyhZaSlsitfFbhZA9tTvZuFuRwkNVNxij_eEq_m2tJ8ZfThM8NZo9coNqpTPc8NDN9Q6AyyLJTV_299iu_JG-GPrVL8cu6HbEhDYfZj3JftRDUB6nEH4_2e8GhSVxIpCJrguf-mV-uBd8HDCfZUQfA', 'width': 4608}], 'place_id': 'ChIJu0A3_8AABDQRDpcEYGsATT8', 'plus_code': {'compound_code': '856C+P4 Yau Ma Tei', 'global_code': '7PJP856C+P4'}, 'rating': 3.1, 'reference': 'ChIJu0A3_8AABDQRDpcEYGsATT8', 'types': ['point_of_interest', 'establishment'], 'user_ratings_total': 7}, {'formatted_address': 'Hong Kong, Sham Shui Po, Tai Po Rd, 79-81號號地下', 'geometry': {'location': {'lat': 22.332315, 'lng': 114.164044}, 'viewport': {'northeast': {'lat': 22.33369562989272, 'lng': 114.1654361798927}, 'southwest': {'lat': 22.33099597010727, 'lng': 114.1627365201073}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/generic_business-71.png', 'id': '56e19d69a29e279bd28b5f9b89fc98842c97f6e9', 'name': 'Shing Hing Mahjong School Ltd - Sham Shui Po Branch', 'opening_hours': {}, 'place_id': 'ChIJD656LUsHBDQRJjUlxy88Ex8', 'plus_code': {'compound_code': '85J7+WJ Sham Shui Po', 'global_code': '7PJP85J7+WJ'}, 'rating': 3.3, 'reference': 'ChIJD656LUsHBDQRJjUlxy88Ex8', 'types': ['point_of_interest', 'establishment'], 'user_ratings_total': 9}, {'formatted_address': '5/F-7/F, Yau Shing Building, 129號 Tung Choi St, Mong Kok, Hong Kong', 'geometry': {'location': {'lat': 22.3207228, 'lng': 114.1700846}, 'viewport': {'northeast': {'lat': 22.32208807989272, 'lng': 114.1715232298927}, 'southwest': {'lat': 22.31938842010728, 'lng': 114.1688235701073}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/generic_business-71.png', 'id': 'e60da74206e5d08daec75461a7287306651e29be', 'name': '美滿會雀局小菜(旺角)', 'opening_hours': {'open_now': True}, 'photos': [{'height': 1365, 'html_attributions': ['<a href="https://maps.google.com/maps/contrib/115224442830844579493">A Google User</a>'], 'photo_reference': 'CmRaAAAA-L76c-Y9eS0fpmVfRtLyAIu0Tck9Qjtb9vLIM093bU70pr-CMlp5enulFux8rh6UgtX70Q_PFhwOG_RW1EkOCSuLA56dBxkRzBzVJVLY50LqV3mz0iUIKUWLOYMXpdwmEhCLH4bVbQP6rGIN2dRVuv-mGhQZ7DRMmAOKm4AYJithx9836YE-hQ', 'width': 2048}], 'place_id': 'ChIJjwIwZcgABDQRQ6G86sUOG0c', 'plus_code': {'compound_code': '85CC+72 Mong Kok', 'global_code': '7PJP85CC+72'}, 'rating': 3.8, 'reference': 'ChIJjwIwZcgABDQRQ6G86sUOG0c', 'types': ['restaurant', 'food', 'point_of_interest', 'establishment'], 'user_ratings_total': 16}, {'formatted_address': '號, 2 Temple St, Hong Kong', 'geometry': {'location': {'lat': 22.3116154, 'lng': 114.1702209}, 'viewport': {'northeast': {'lat': 22.31295912989272, 'lng': 114.1715304298927}, 'southwest': {'lat': 22.31025947010728, 'lng': 114.1688307701073}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/school-71.png', 'id': '44b009dc7a70c1fc7b39b2da4813924b83a8f095', 'name': '雞記麻將', 'opening_hours': {}, 'place_id': 'ChIJsdM9VsAABDQR5vhxOkLp7E4', 'plus_code': {'compound_code': '856C+J3 Hong Kong', 'global_code': '7PJP856C+J3'}, 'rating': 3, 'reference': 'ChIJsdM9VsAABDQR5vhxOkLp7E4', 'types': ['school', 'point_of_interest', 'establishment'], 'user_ratings_total': 1}, {'formatted_address': '號, 62 Hoi Yuen Rd, Hong Kong', 'geometry': {'location': {'lat': 22.310466, 'lng': 114.225166}, 'viewport': {'northeast': {'lat': 22.31192472989272, 'lng': 114.2264197298927}, 'southwest': {'lat': 22.30922507010728, 'lng': 114.2237200701073}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/shopping-71.png', 'id': '39b2c007dad1a8c85aea4339c85abbf07923d4fd', 'name': '電動麻雀機 自動麻雀機 麻將機', 'opening_hours': {'open_now': False}, 'photos': [{'height': 3024, 'html_attributions': ['<a href="https://maps.google.com/maps/contrib/100411783073721330892">香港雀晨 歐派電動麻雀機公司電動麻雀枱</a>'], 'photo_reference': 'CmRaAAAAdIbqdkDIxTuPxWZy1QhyWm18IZGAk30yvpCMNJmq6nFLi3-vff0r5Gfm68PKziNmrtWNbkdLGqIeD8JIMefSLwYwk_3f5ymZcf-BBDDoL5pyHxsB4GF1NV19wQSYvG_FEhAYVg5ie52SOgO7UEUfMlaXGhQCmmHk2QIWF9DK4BhRLTZJ7-G6Mg', 'width': 4032}], 'place_id': 'ChIJ5TPlbkUBBDQR-YQGSB42brs', 'plus_code': {'compound_code': '866G+53 Hong Kong', 'global_code': '7PJP866G+53'}, 'rating': 5, 'reference': 'ChIJ5TPlbkUBBDQR-YQGSB42brs', 'types': ['electronics_store', 'point_of_interest', 'store', 'establishment'], 'user_ratings_total': 2}, {'formatted_address': 'China, Guangdong Province, Shenzhen, Luohu District, 桃园路', 'geometry': {'location': {'lat': 22.559119, 'lng': 114.108288}, 'viewport': {'northeast': {'lat': 22.56038507989272, 'lng': 114.1096391298927}, 'southwest': {'lat': 22.55768542010728, 'lng': 114.1069394701073}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/shopping-71.png', 'id': 'db76b7b1d28bd5a2b86eb3e3d5859dd15753fc64', 'name': '至益全自动麻将机', 'place_id': 'ChIJv1pzAqb1AzQR45B0f0VCrnQ', 'plus_code': {'compound_code': 'H455+J8 Luohu District, Shenzhen, Guangdong Province, China', 'global_code': '7PJPH455+J8'}, 'rating': 0, 'reference': 'ChIJv1pzAqb1AzQR45B0f0VCrnQ', 'types': ['point_of_interest', 'establishment'], 'user_ratings_total': 0}, {'formatted_address': 'Yijing Rd, Luohu District, Shenzhen, Guangdong Province, China', 'geometry': {'location': {'lat': 22.559321, 'lng': 114.137369}, 'viewport': {'northeast': {'lat': 22.56065637989273, 'lng': 114.1387031298927}, 'southwest': {'lat': 22.55795672010728, 'lng': 114.1360034701073}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/shopping-71.png', 'id': '6fb9aeb413855d8580745251091eaa09bedf6c04', 'name': 'Zhiyi Mahjong Machine', 'place_id': 'ChIJnXRzBoL1AzQRxj75q8FKJQI', 'plus_code': {'compound_code': 'H45P+PW Luohu District, Shenzhen, Guangdong Province, China', 'global_code': '7PJPH45P+PW'}, 'rating': 0, 'reference': 'ChIJnXRzBoL1AzQRxj75q8FKJQI', 'types': ['furniture_store', 'home_goods_store', 'point_of_interest', 'store', 'establishment'], 'user_ratings_total': 0}, {'formatted_address': 'Dongmen Middle Rd, Luohu District, Shenzhen, Guangdong Province, China', 'geometry': {'location': {'lat': 22.549055, 'lng': 114.1228762}, 'viewport': {'northeast': {'lat': 22.55044107989272, 'lng': 114.1241545798927}, 'southwest': {'lat': 22.54774142010728, 'lng': 114.1214549201073}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/shopping-71.png', 'id': '7942b723c5b3c68d9392e66d6b9b64c0ea5b9678', 'name': 'Queyou Full Automatic Mahjong Table', 'place_id': 'ChIJaXItoZf1AzQRPn7S71uhcWg', 'plus_code': {'compound_code': 'G4XF+J5 Luohu District, Shenzhen, Guangdong Province, China', 'global_code': '7PJPG4XF+J5'}, 'rating': 0, 'reference': 'ChIJaXItoZf1AzQRPn7S71uhcWg', 'types': ['store', 'point_of_interest', 'establishment'], 'user_ratings_total': 0}, {'formatted_address': 'China, Guangdong Province, Shenzhen, Futian District, 八卦三路309号', 'geometry': {'location': {'lat': 22.561881, 'lng': 114.093945}, 'viewport': {'northeast': {'lat': 22.56322142989272, 'lng': 114.0952949798927}, 'southwest': {'lat': 22.56052177010728, 'lng': 114.0925953201073}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/shopping-71.png', 'id': '49d95d908b08f896995b58d9e12a222275117321', 'name': '奥龙麻将', 'place_id': 'ChIJ8VP2jlT0AzQR-2ubIfrt0b8', 'plus_code': {'compound_code': 'H36V+QH Futian District, Shenzhen, Guangdong Province, China', 'global_code': '7PJPH36V+QH'}, 'rating': 0, 'reference': 'ChIJ8VP2jlT0AzQR-2ubIfrt0b8', 'types': ['point_of_interest', 'establishment'], 'user_ratings_total': 0}, {'formatted_address': 'China, Guangdong Province, Shenzhen, Luohu District, 坭岗北村', 'geometry': {'location': {'lat': 22.567707, 'lng': 114.096954}, 'viewport': {'northeast': {'lat': 22.56905282989272, 'lng': 114.0982896298927}, 'southwest': {'lat': 22.56635317010728, 'lng': 114.0955899701073}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/shopping-71.png', 'id': '0e5b801b056c982b18ca9b8b24f8802df69cfeaf', 'name': '雀友麻将', 'place_id': 'ChIJ84UMIwD1AzQRS7T6o5uHIB0', 'plus_code': {'compound_code': 'H39W+3Q Luohu District, Shenzhen, Guangdong Province, China', 'global_code': '7PJPH39W+3Q'}, 'rating': 0, 'reference': 'ChIJ84UMIwD1AzQRS7T6o5uHIB0', 'types': ['point_of_interest', 'establishment'], 'user_ratings_total': 0}, {'formatted_address': '84 Dongsheng St, Luohu District, Shenzhen, Guangdong Province, China', 'geometry': {'location': {'lat': 22.552296, 'lng': 114.12622}, 'viewport': {'northeast': {'lat': 22.55362897989272, 'lng': 114.1275589798927}, 'southwest': {'lat': 22.55092932010728, 'lng': 114.1248593201073}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/shopping-71.png', 'id': '5c54f333d4080ee69a5cf4706c126ed07b8fca98', 'name': 'Shanghai Queyou Mahjong Machine', 'place_id': 'ChIJR5LEJ5r1AzQRZgwhupGemXE', 'plus_code': {'compound_code': 'H42G+WF Luohu District, Shenzhen, Guangdong Province, China', 'global_code': '7PJPH42G+WF'}, 'rating': 0, 'reference': 'ChIJR5LEJ5r1AzQRZgwhupGemXE', 'types': ['store', 'point_of_interest', 'establishment'], 'user_ratings_total': 0}, {'formatted_address': 'China, Guangdong Province, Shenzhen, Luohu District, 红桂路2037号', 'geometry': {'location': {'lat': 22.549836, 'lng': 114.107782}, 'viewport': {'northeast': {'lat': 22.55117772989272, 'lng': 114.1091147298927}, 'southwest': {'lat': 22.54847807010728, 'lng': 114.1064150701073}}}, 'icon': 'https://maps.gstatic.com/mapfiles/place_api/icons/shopping-71.png', 'id': 'c5381d60cf5fab78c0caef2688a5f3cd1bd93ed6', 'name': '雀友全自动麻将机', 'place_id': 'ChIJHZbzhLD1AzQRmsuG4_WLEx8', 'plus_code': {'compound_code': 'G4X5+W4 Luohu District, Shenzhen, Guangdong Province, China', 'global_code': '7PJPG4X5+W4'}, 'rating': 0, 'reference': 'ChIJHZbzhLD1AzQRmsuG4_WLEx8', 'types': ['point_of_interest', 'establishment'], 'user_ratings_total': 0}]
    
        while(True):
            if "next_page_token" in request_result.keys() and request_result["next_page_token"] != "":
                time.sleep(5)
                next_request_url = "https://maps.googleapis.com/maps/api/place/textsearch/json?key=AIzaSyDHHFp4x6vKyYcyf_GKiJ8c2E9ygpsklds&pagetoken=" + request_result["next_page_token"]
                request_result = json.loads(requests.get(next_request_url).text)
                print(next_request_url)
                print(request_result["results"])
                search_result += request_result["results"]
            else:
                break
            
    result_for_output = []
    for eachitem in search_result:
        #result_for_output.append(str(eachitem["geometry"]["location"]["lng"]) + "|" + str(eachitem["geometry"]["location"]["lat"]) + "|" + eachitem["name"] + "|" + eachitem["formatted_address"])
        result_for_output.append("[\"" + eachitem["name"] + "\",###," + str(eachitem["geometry"]["location"]["lng"]) + "," + str(eachitem["geometry"]["location"]["lat"]) + "]")
    result_for_output = list(set(result_for_output))  #去重
    #output_file = open(str(search_word) + ".txt", "w", encoding='utf-8')
    output_file = open(str(search_word) + "_json.txt", "w", encoding='utf-8')
    for eachitem in result_for_output:
        try:
            output_file.write(eachitem + ",")
        except:
            output_file.write(filter_emoji(eachitem) + ",")
        output_file.flush()
    output_file.close()
    
